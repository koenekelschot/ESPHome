esphome:
  name: vloerverwarming
  platform: ESP8266
  board: esp01_1m

wifi:
  networks:
  - ssid: !secret wifi_ssid
    password: !secret wifi_password
  ap:
    ssid: "Vloerverwarming Hotspot"
    password: !secret ap_password

api:
  password: !secret api_password

ota:
  password: !secret ota_password

logger:
  baud_rate: 0

uart:
  rx_pin: RX
  baud_rate: 4800

interval:
- interval: 10s
  then:
    if:
      condition:
        wifi.connected:
      then:
      - switch.turn_on: blue_led
      else:
      - switch.turn_off: blue_led

binary_sensor:
- platform: gpio
  pin:
    number: GPIO0
    mode: INPUT_PULLUP
  name: "Vloerverwarming Power Button"
  on_press:
  - switch.toggle: relay

- platform: status
  name: "Vloerverwarming Status"

switch:
- platform: gpio
  id: blue_led
  pin:
    number: GPIO13
    inverted: true

- platform: gpio
  name: "Vloerverwarming"
  pin: GPIO12
  id: relay
  icon: mdi:radiator
  restore_mode: RESTORE_DEFAULT_OFF

- platform: restart
  name: "Vloerverwarming Restart"

sensor:
- platform: wifi_signal
  name: "Vloerverwarming WiFi Signal"
  update_interval: 60s
  filters:
  - sliding_window_moving_average:
      window_size: 15
      send_every: 15
      send_first_at: 1

- platform: cse7766
  update_interval: 15s
  current:
    name: "Vloerverwarming Current"
    filters:
    - sliding_window_moving_average:
        window_size: 10
        send_every: 10
        send_first_at: 1
  voltage:
    name: "Vloerverwarming Voltage"
    filters:
    - sliding_window_moving_average:
        window_size: 10
        send_every: 10
        send_first_at: 1
  power:
    name: "Vloerverwarming Current Consumption"
    id: vloerverwarming_wattage
    filters:
    - sliding_window_moving_average:
        window_size: 10
        send_every: 10
        send_first_at: 1

- platform: total_daily_energy
  name: "Vloerverwarming Today's Consumption"
  power_id: vloerverwarming_wattage
  filters:
  - multiply: 0.001
  unit_of_measurement: kWh

time:
- platform: homeassistant
  id: homeassistant_time
